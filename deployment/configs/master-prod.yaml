# Production Environment Configuration for Master Node

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 60s
  write_timeout: 120s
  shutdown_timeout: 30s

database:
  type: "postgres"
  host: "localhost"
  port: 5432
  database: "ffrtmp"
  user: "ffrtmp"
  password: "CHANGE_ME_IN_PRODUCTION"
  ssl_mode: "require"
  max_connections: 100
  max_idle_connections: 10
  connection_max_lifetime: 3600s

logging:
  level: "info"
  format: "json"
  output: "/var/log/ffrtmp/master.log"

api:
  rate_limit: 1000
  burst: 2000
  enable_cors: false
  trusted_proxies:
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "192.168.0.0/16"

worker:
  heartbeat_timeout: 90s  # 3 missed heartbeats @ 30s interval
  max_missed_heartbeats: 3
  cleanup_interval: 60s

job:
  default_timeout: 7200s
  max_retries: 3
  cleanup_retention: 720h  # 30 days
  archive_completed: true
  archive_path: "/var/lib/ffrtmp-master/archive"

metrics:
  enabled: true
  port: 9090
  path: "/metrics"

tls:
  enabled: true
  cert_file: "/etc/ffrtmp-master/certs/server.crt"
  key_file: "/etc/ffrtmp-master/certs/server.key"
  client_ca_file: "/etc/ffrtmp-master/certs/ca.crt"
  verify_client: true

alerting:
  enabled: true
  webhook_url: "https://hooks.example.com/alerts"
  alert_on_worker_down: true
  alert_on_job_failure: true
  alert_threshold_failed_jobs: 5

backup:
  enabled: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  retention_days: 30
  backup_path: "/var/backups/ffrtmp"
